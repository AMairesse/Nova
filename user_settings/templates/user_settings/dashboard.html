<!-- user_settings/templates/user_settings/dashboard.html -->
{% extends "base.html" %}
{% load static i18n %}

{% block extra_js %}
  {{ block.super }}
  <script src="{% static 'user_settings/js/dashboard_tabs.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4">{% trans "User configuration" %}</h2>

  <ul class="nav nav-tabs" id="settingsTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="tab-providers"
              data-bs-toggle="tab"
              data-bs-target="#pane-providers"
              type="button" role="tab">
        {% trans "LLM Providers" %}
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab-agents"
              data-bs-toggle="tab"
              data-bs-target="#pane-agents"
              type="button" role="tab">
        {% trans "Agents" %}
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab-tools"
              data-bs-toggle="tab"
              data-bs-target="#pane-tools"
              type="button" role="tab">
        {% trans "Tools" %}
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab-general"
              data-bs-toggle="tab"
              data-bs-target="#pane-general"
              type="button" role="tab">
        {% trans "General" %}
      </button>
    </li>
    {% if has_memory_tool %}
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="tab-memory"
              data-bs-toggle="tab"
              data-bs-target="#pane-memory"
              type="button" role="tab">
        {% trans "Memory" %}
      </button>
    </li>
    {% endif %}
  </ul>

  <div class="tab-content pt-3">
    <div class="tab-pane fade show active htmx-pane"
         id="pane-providers"
         role="tabpanel"
         hx-get="{% url 'user_settings:providers' %}?partial=1"
         hx-trigger="load"
         hx-target="#pane-providers"
         hx-swap="innerHTML">
      <div class="text-muted">{% trans "Loading providers…" %}</div>
    </div>

    <div class="tab-pane fade htmx-pane"
         id="pane-agents"
         role="tabpanel"
         hx-get="{% url 'user_settings:agents' %}?partial=1"
         hx-trigger="load"
         hx-target="#pane-agents"
         hx-swap="innerHTML">
      <div class="text-muted">{% trans "Loading agents…" %}</div>
    </div>

    <div class="tab-pane fade htmx-pane"
         id="pane-tools"
         role="tabpanel"
         hx-get="{% url 'user_settings:tools' %}?partial=1"
         hx-trigger="load"
         hx-target="#pane-tools"
         hx-swap="innerHTML">
      <div class="text-muted">{% trans "Loading tools…" %}</div>
    </div>

    <div class="tab-pane fade htmx-pane"
        id="pane-general"
        role="tabpanel"
        hx-get="{% url 'user_settings:general' %}?partial=1"
        hx-trigger="revealed"
        hx-target="this"
        hx-swap="innerHTML">
      <div class="text-muted">{% trans "Loading…" %}</div>
    </div>

    {% if has_memory_tool %}
    <div class="tab-pane fade htmx-pane"
        id="pane-memory"
        role="tabpanel"
        hx-get="{% url 'user_settings:memory' %}?partial=1"
        hx-trigger="revealed"
        hx-target="this"
        hx-swap="innerHTML">
      <div class="text-muted">{% trans "Loading memory…" %}</div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
