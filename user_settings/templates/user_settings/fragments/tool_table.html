<!-- user_settings/templates/user_settings/fragments/tool_table.html -->
{% load i18n %}
<div class="d-flex justify-content-between align-items-center mb-2">
  <h5 class="mb-0"></h5>
  <a href="{% url 'user_settings:tool-add' %}?from=tools"
     class="btn btn-sm btn-primary">
    <i class="bi bi-plus-lg me-1"></i>Add tool
  </a>
</div>

<div class="table-responsive">
  <table class="table table-hover align-middle">
    <thead class="table-light">
      <tr><th>{% trans "Name" %}</th><th>{% trans "Type" %}</th><th>{% trans "Active" %}</th><th>{% trans "Models Using" %}</th><th class="text-end">{% trans "Actions" %}</th></tr>
    </thead>
    <tbody>
      {% for tool in tools %}
        <tr>
          <td>{{ tool.name }}</td>
          <td>{{ tool.get_tool_type_display }}</td>
          <td class="text-center">
            {% if tool.is_active %}
              <span class="badge bg-success">
                <i class="bi bi-check-circle-fill me-1"></i>{% trans "Active" %}
              </span>
            {% else %}
              <span class="badge bg-secondary">
                <i class="bi bi-x-circle-fill me-1"></i>{% trans "Inactive" %}
              </span>
            {% endif %}
          </td>
          <td class="text-center">
            {% if tool.agent_count == 0 %}
              <span class="badge bg-light text-dark">{{ tool.agent_count }}</span>
            {% else %}
              <span class="badge bg-info text-dark">{{ tool.agent_count }}</span>
            {% endif %}
          </td>
          <td class="text-end">
            {% if tool.user == request.user %}
            <a href="{% url 'user_settings:tool-edit' tool.pk %}?from=tools"
              class="btn btn-sm btn-outline-primary me-1"><i class="bi bi-pencil"></i> Edit</a>
            <a href="{% url 'user_settings:tool-configure' tool.pk %}?from=tools"
              class="btn btn-sm btn-outline-primary me-1"><i class="bi bi-gear"></i> Configure</a>
            <a href="{% url 'user_settings:tool-delete' tool.pk %}?from=tools"
              class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i> Delete</a>
            {% endif %}
            </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% if is_paginated %}{% include "includes/pagination.html" %}{% endif %}
