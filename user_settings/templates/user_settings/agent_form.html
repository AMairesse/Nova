{% extends "base.html" %}
{% load crispy_forms_tags static %}

{% block extra_js %}
  {{ block.super }}
  <script src="{% static 'user_settings/agent.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container py-4" style="max-width: 640px;">
  <h2 class="mb-3">
    {% if object.pk %}Edit agent{% else %}Add agent{% endif %}
  </h2>

  <form method="post" novalidate>
    {% csrf_token %}
    {% if request.GET.from %}
      <input type="hidden" name="from" value="{{ request.GET.from }}">
    {% endif %}
    {% crispy form %}

    <div class="mt-4">
      <button class="btn btn-primary me-2" type="submit">
        <i class="bi bi-check-lg me-1"></i>Save
      </button>
      {% if request.GET.from %}
        <a href="{% url 'user_settings:dashboard' %}#pane-{{ request.GET.from }}"
          class="btn btn-secondary">
          Cancel
        </a>
      {% else %}
        <a href="{% url 'user_settings:agents' %}" class="btn btn-secondary">
          Cancel
        </a>
      {% endif %}
    </div>
  </form>
</div>
{% endblock %}
